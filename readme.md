# Relify

<div align="center">

![License](https://img.shields.io/github/license/YisRime/Relify)
![Go Version](https://img.shields.io/github/go-mod/go-version/YisRime/Relify)
![Build Status](https://img.shields.io/github/actions/workflow/status/YisRime/Relify/main.yml?branch=main)
![Release](https://img.shields.io/github/v/release/YisRime/Relify)

[English](./readme_en.md) | ç®€ä½“ä¸­æ–‡

è½»é‡çº§**è·¨å¹³å°**æ¶ˆæ¯ä¸­ç»§ Â· ä¸åŒå¹³å°ç”¨æˆ·**æ— ç¼æ²Ÿé€š**

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä¸€ä¸ª â­ï¸ Starï¼

**QQ ç¾¤**: [855571375](https://qm.qq.com/q/PdLMx9Jowq) - ä¸­æ–‡ç”¨æˆ·äº¤æµã€é—®é¢˜åé¦ˆ

</div>

---

## ğŸ“– ç®€ä»‹

Relify æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„è·¨å¹³å°æ¶ˆæ¯æ¡¥æ¥æœåŠ¡ï¼Œä¸“ä¸ºå®ç° **Matrix**ã€**QQ** ç­‰ä¸åŒå³æ—¶é€šè®¯å¹³å°ä¹‹é—´çš„æ¶ˆæ¯äº’é€šè€Œè®¾è®¡ã€‚

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

- **æè‡´æ€§èƒ½** - åŸºäº Go è¯­è¨€å¼€å‘ï¼Œå……åˆ†åˆ©ç”¨åç¨‹å¹¶å‘ä¼˜åŠ¿ï¼Œå•å®ä¾‹è½»æ¾å¤„ç†æ•°ä¸‡æ¡æ¶ˆæ¯
- **é›¶é…ç½®å¯åŠ¨** - æ™ºèƒ½è¯†åˆ«æ¶ˆæ¯æµå‘ï¼Œè‡ªåŠ¨å»ºç«‹æˆ¿é—´æ˜ å°„å…³ç³»ï¼Œå¼€ç®±å³ç”¨
- **å®Œæ•´æ¶ˆæ¯æ”¯æŒ** - ä¸ä»…ä¼ é€’æ–‡æœ¬ï¼Œè¿˜å®Œæ•´æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡ä»¶ç­‰å¤šåª’ä½“å†…å®¹
- **é«˜çº§ç‰¹æ€§åŒæ­¥** - æ¶ˆæ¯ç¼–è¾‘ã€æ’¤å›ã€å›å¤å¼•ç”¨ç­‰é«˜çº§åŠŸèƒ½è·¨å¹³å°å®Œç¾åŒæ­¥
- **æ¶æ„æ¸…æ™°** - ç®€æ´çš„é€‚é…å™¨æ¥å£è®¾è®¡ï¼Œè½»æ¾æ‰©å±•æ”¯æŒæ–°çš„èŠå¤©å¹³å°
- **å¯é ç¨³å®š** - SQLite æŒä¹…åŒ–å­˜å‚¨ï¼Œæ¶ˆæ¯æ˜ å°„å…³ç³»ä¸ä¸¢å¤±ï¼ŒæœåŠ¡é‡å¯åè‡ªåŠ¨æ¢å¤
- **æ•°æ®å®‰å…¨** - æ‰€æœ‰æ¶ˆæ¯å¤„ç†æœ¬åœ°åŒ–ï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹äº‘æœåŠ¡

### ğŸ’¡ é€‚ç”¨åœºæ™¯

- **å¼€æºç¤¾åŒºæ¡¥æ¥** - è¿æ¥ Matrix å¼€æºç¤¾åŒºä¸ QQ/å¾®ä¿¡ç­‰å›½å†…ä¸»æµå¹³å°
- **å›¢é˜Ÿåä½œ** - ç»Ÿä¸€ä¸åŒéƒ¨é—¨ä½¿ç”¨çš„å¤šç§èŠå¤©å·¥å…·
- **æœºå™¨äººé›†æˆ** - æ„å»ºè·¨å¹³å°çš„æ™ºèƒ½å®¢æœæˆ–é€šçŸ¥ç³»ç»Ÿ
- **å¤šå¹³å°ç®¡ç†** - åœ¨ä¸€ä¸ªå®¢æˆ·ç«¯ç®¡ç†å¤šä¸ªå¹³å°çš„æ¶ˆæ¯

## âœ¨ ç‰¹æ€§

### åŸºç¡€æ¶ˆæ¯ç±»å‹

- âœ… **æ–‡æœ¬æ¶ˆæ¯** - æ”¯æŒ Markdown æ ¼å¼ã€è¡¨æƒ…ç¬¦å·
- âœ… **å›¾ç‰‡** - è‡ªåŠ¨æ ¼å¼è½¬æ¢å’Œå‹ç¼©ï¼Œæ”¯æŒåŠ¨å›¾
- âœ… **è§†é¢‘** - è·¨å¹³å°è§†é¢‘ä¼ è¾“ï¼Œæ ¼å¼å…¼å®¹å¤„ç†
- âœ… **éŸ³é¢‘** - è¯­éŸ³æ¶ˆæ¯å®Œæ•´åŒæ­¥
- âœ… **æ–‡ä»¶** - ä»»æ„ç±»å‹æ–‡ä»¶ä¼ è¾“

### é«˜çº§æ¶ˆæ¯ç‰¹æ€§

- âœ… **æ¶ˆæ¯ç¼–è¾‘** - ç¼–è¾‘åè‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰æ¡¥æ¥å¹³å°
- âœ… **æ¶ˆæ¯æ’¤å›** - è·¨å¹³å°æ’¤å›ï¼Œä¿æŒæ“ä½œä¸€è‡´æ€§
- âœ… **å›å¤å¼•ç”¨** - ä¿ç•™æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¼•ç”¨é“¾è¿½æº¯
- âœ… **@æåŠ** - è·¨å¹³å°ç”¨æˆ·æåŠå’Œé€šçŸ¥
- âœ… **è½¬å‘** - æ¶ˆæ¯è½¬å‘æ—¶ä¿ç•™åŸå§‹å‘é€è€…ä¿¡æ¯

### å…ƒæ•°æ®åŒæ­¥

- âœ… **å‘é€è€…ä¿¡æ¯** - æ˜µç§°ã€å¤´åƒè‡ªåŠ¨åŒæ­¥
- âœ… **ç¾¤ç»„ä¿¡æ¯** - ç¾¤åç§°ã€ç¾¤å…¬å‘ŠåŒæ­¥
- âœ… **æ—¶é—´æˆ³** - æ¶ˆæ¯æ—¶é—´ç²¾ç¡®åˆ°æ¯«ç§’
- âœ… **å·²è¯»çŠ¶æ€** - æ¶ˆæ¯å·²è¯»çŠ¶æ€è·¨å¹³å°åŒæ­¥

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Matrix æœåŠ¡å™¨**ï¼ˆå¦‚ [Synapse](https://github.com/matrix-org/synapse)ï¼‰
- **QQ OneBot å®ç°**ï¼ˆå¦‚ [Lagrange](https://github.com/LagrangeDev/Lagrange.Core) æˆ– [NapCat](https://github.com/NapNeko/NapCatQQ)ï¼‰

### å®‰è£…

ä» [Releases](https://github.com/YisRime/Relify/releases) ä¸‹è½½é€‚åˆæ‚¨ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œé¦–æ¬¡è¿è¡Œä¼šåœ¨ `./data` ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶ `config.yaml`ã€‚

### é…ç½®

ç¼–è¾‘ `config.yaml`ï¼Œæ ¹æ®æ‚¨çš„å®é™…æƒ…å†µè°ƒæ•´é…ç½®ï¼š

```yaml
# åŸºç¡€é…ç½®
log_level: "info"       # æ—¥å¿—çº§åˆ«: debug | info | warn | error
mode: "hub"             # è¿è¡Œæ¨¡å¼: hubï¼ˆæ˜Ÿå‹æ‹“æ‰‘ï¼‰| meshï¼ˆç½‘çŠ¶æ‹“æ‰‘ï¼‰
hub: "matrix"           # ä¸­å¿ƒå¹³å° IDï¼ˆhub æ¨¡å¼å¿…å¡«ï¼‰
retent_day: 30          # æ¶ˆæ¯æ˜ å°„å…³ç³»ä¿ç•™å¤©æ•°

platforms:
  # Matrix å¹³å°é…ç½®
  matrix:
    driver: "matrix"    # é©±åŠ¨ç±»å‹
    enabled: true       # æ˜¯å¦å¯ç”¨
    config:
      # Matrix æœåŠ¡å™¨åœ°å€ï¼ˆSynapse é»˜è®¤ 8448 ç«¯å£ï¼‰
      server_url: "http://localhost:8448"
      domain: "your.domain"              # æ‚¨çš„ Matrix åŸŸå
      server_domain: ""                  # æœåŠ¡å™¨å®é™…è¿è¡Œçš„åŸŸåï¼ˆå¯é€‰ï¼‰

      # AppService é…ç½®
      appservice:
        id: "relify"
        token: "your_generated_token"
        namespace: "relify_"
        listen: "http://localhost:6168"
      
      # å¯é€‰ï¼šè‡ªåŠ¨é‚€è¯·ç”¨æˆ·åˆ°æ–°åˆ›å»ºçš„æˆ¿é—´
      auto_invite: "@admin:your.domain"

  # QQ å¹³å°é…ç½®
  qq:
    driver: "qq"
    enabled: true
    config:
      protocol: "ws"                      # åè®®: ws | wss | http
      url: "ws://localhost:3001"          # OneBot å®ç°åœ°å€
      secret: ""                          # å¦‚æœé…ç½®äº† access_token éœ€å¡«å†™
      group: ""                           # Mix æ¨¡å¼ä¸‹çš„é»˜è®¤ç¾¤å·
```

#### æ³¨å†Œ AppServiceï¼ˆä»… Matrixï¼‰

åˆ›å»º `registration.yaml` æ–‡ä»¶ï¼š

```yaml
id: relify
url: http://localhost:6168
as_token: your_generated_token_here      # ä¸ config.yaml ä¸­çš„ token ä¿æŒä¸€è‡´
hs_token: your_generated_token_here      # ä¸ config.yaml ä¸­çš„ token ä¿æŒä¸€è‡´
sender_localpart: relify                 # æ­¤é¡¹ä¸ºå›ºå®šè¦æ±‚
namespaces:
  users:
    - exclusive: true
      regex: "@relify_.*:your.domain"    # ä¸ config.yaml ä¸­çš„ namespace ä¿æŒä¸€è‡´
  aliases:
    - exclusive: true
      regex: "#relify_.*:your.domain"    # ä¸ config.yaml ä¸­çš„ namespace ä¿æŒä¸€è‡´
  rooms: []
```

ç„¶ååœ¨ Synapse ä¸­è¿›è¡Œæ³¨å†Œï¼Œä¿®æ”¹ `homeserver.yaml`ï¼š

```yaml
app_service_config_files:
  - /path/to/registration.yaml
```

æˆ–æ˜¯ä½¿ç”¨ Conduitï¼Œä½¿ç”¨ç®¡ç†å‘˜å‘½ä»¤è¿›è¡Œæ³¨å†Œï¼š

```bash
!admin appservices register ```yaml```
```

### å¯åŠ¨

```bash
# å‰å°è¿è¡Œï¼ˆæµ‹è¯•ï¼‰
./relify-linux-amd64

# åå°è¿è¡Œï¼ˆç”Ÿäº§ï¼‰
nohup ./relify-linux-amd64 > relify.log 2>&1 &

# ä½¿ç”¨ systemdï¼ˆæ¨èï¼‰
sudo nano /etc/systemd/system/relify.service
```

## ğŸ™ è‡´è°¢

Relify çš„è¯ç”Ÿç¦»ä¸å¼€ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [Matrix](https://matrix.org/) - å¼€æ”¾çš„å»ä¸­å¿ƒåŒ–é€šè®¯åè®®æ ‡å‡†
- [mautrix-go](https://github.com/mautrix/go) - å¼ºå¤§çš„ Matrix Go SDK
- [Lagrange](https://github.com/LagrangeDev/Lagrange.Core) - ä¼˜ç§€çš„ NTQQ åè®®å®ç°
- [NapCat](https://github.com/NapNeko/NapCatQQ) - ç°ä»£åŒ–çš„ OneBot å®ç°

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [License](./LICENSE) å¼€æºåè®®ã€‚

[![Star History Chart](https://api.star-history.com/svg?repos=YisRime/Relify&type=Date)](https://star-history.com/#YisRime/Relify&Date)
